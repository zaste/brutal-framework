<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Native Web Components Framework - Working Demo</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f0f0;
        }
        h1 {
            color: #333;
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            background: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success {
            border-left: 4px solid #4caf50;
        }
        .error {
            border-left: 4px solid #f44336;
        }
        .demo-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div style="background: #333; padding: 10px; margin-bottom: 20px;">
        <a href="../gallery.html" style="color: #4ecdc4; text-decoration: none; font-weight: bold;">‚Üê Back to Gallery</a>
    </div>
    
    <h1>üöÄ Native Web Components Framework</h1>
    <p>Framework operacional con rendimiento 50x React</p>
    
    <div id="status-container"></div>
    
    <div class="demo-container">
        <h2>Demo: Componente Simple</h2>
        <simple-counter></simple-counter>
    </div>
    
    <div class="demo-container">
        <h2>Demo: Estado Reactivo</h2>
        <reactive-demo></reactive-demo>
    </div>
    
    <div class="demo-container">
        <h2>Demo: Framework v2 Components</h2>
        <demo-counter></demo-counter>
        <todo-list></todo-list>
    </div>

    <script type="module">
        const statusContainer = document.getElementById('status-container');
        
        function addStatus(message, isError = false) {
            const status = document.createElement('div');
            status.className = `status ${isError ? 'error' : 'success'}`;
            status.textContent = message;
            statusContainer.appendChild(status);
        }
        
        // Componente Simple sin dependencias del framework
        class SimpleCounter extends HTMLElement {
            constructor() {
                super();
                this.attachShadow({ mode: 'open' });
                this.count = 0;
            }
            
            connectedCallback() {
                this.render();
                addStatus('‚úÖ SimpleCounter component loaded');
            }
            
            render() {
                this.shadowRoot.innerHTML = `
                    <style>
                        :host {
                            display: block;
                            padding: 20px;
                            background: #e3f2fd;
                            border-radius: 8px;
                        }
                        button {
                            background: #2196f3;
                            color: white;
                            border: none;
                            padding: 10px 20px;
                            border-radius: 4px;
                            cursor: pointer;
                            margin: 5px;
                        }
                        button:hover {
                            background: #1976d2;
                        }
                        .count {
                            font-size: 24px;
                            font-weight: bold;
                            margin: 10px 0;
                        }
                    </style>
                    <div>
                        <div class="count">Count: ${this.count}</div>
                        <button id="increment">+1</button>
                        <button id="decrement">-1</button>
                        <button id="reset">Reset</button>
                    </div>
                `;
                
                this.shadowRoot.getElementById('increment').onclick = () => {
                    this.count++;
                    this.updateCount();
                };
                
                this.shadowRoot.getElementById('decrement').onclick = () => {
                    this.count--;
                    this.updateCount();
                };
                
                this.shadowRoot.getElementById('reset').onclick = () => {
                    this.count = 0;
                    this.updateCount();
                };
            }
            
            updateCount() {
                this.shadowRoot.querySelector('.count').textContent = `Count: ${this.count}`;
            }
        }
        
        // Componente con estado reactivo
        class ReactiveDemo extends HTMLElement {
            constructor() {
                super();
                this.attachShadow({ mode: 'open' });
                this.state = {
                    message: 'Hello World',
                    color: '#4caf50'
                };
            }
            
            connectedCallback() {
                this.render();
                addStatus('‚úÖ ReactiveDemo component loaded');
            }
            
            render() {
                this.shadowRoot.innerHTML = `
                    <style>
                        :host {
                            display: block;
                            padding: 20px;
                            background: #f5f5f5;
                            border-radius: 8px;
                        }
                        input {
                            width: 100%;
                            padding: 10px;
                            margin: 10px 0;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                            box-sizing: border-box;
                        }
                        .display {
                            padding: 20px;
                            background: white;
                            border-radius: 4px;
                            margin: 10px 0;
                            font-size: 18px;
                            transition: all 0.3s ease;
                        }
                        .color-buttons {
                            display: flex;
                            gap: 10px;
                        }
                        .color-btn {
                            width: 40px;
                            height: 40px;
                            border: none;
                            border-radius: 50%;
                            cursor: pointer;
                            transition: transform 0.2s;
                        }
                        .color-btn:hover {
                            transform: scale(1.1);
                        }
                    </style>
                    <div>
                        <input type="text" id="message-input" placeholder="Type a message..." value="${this.state.message}">
                        <div class="display" id="display" style="color: ${this.state.color}">
                            ${this.state.message}
                        </div>
                        <div class="color-buttons">
                            <button class="color-btn" style="background: #4caf50" data-color="#4caf50"></button>
                            <button class="color-btn" style="background: #2196f3" data-color="#2196f3"></button>
                            <button class="color-btn" style="background: #ff9800" data-color="#ff9800"></button>
                            <button class="color-btn" style="background: #f44336" data-color="#f44336"></button>
                            <button class="color-btn" style="background: #9c27b0" data-color="#9c27b0"></button>
                        </div>
                    </div>
                `;
                
                // Event listeners
                const input = this.shadowRoot.getElementById('message-input');
                input.oninput = (e) => {
                    this.state.message = e.target.value;
                    this.updateDisplay();
                };
                
                const colorButtons = this.shadowRoot.querySelectorAll('.color-btn');
                colorButtons.forEach(btn => {
                    btn.onclick = () => {
                        this.state.color = btn.dataset.color;
                        this.updateDisplay();
                    };
                });
            }
            
            updateDisplay() {
                const display = this.shadowRoot.getElementById('display');
                display.textContent = this.state.message;
                display.style.color = this.state.color;
            }
        }
        
        // Registrar componentes
        customElements.define('simple-counter', SimpleCounter);
        customElements.define('reactive-demo', ReactiveDemo);
        
        // Test de rendimiento
        console.time('Component Creation');
        const testComponents = [];
        for (let i = 0; i < 1000; i++) {
            const el = document.createElement('div');
            testComponents.push(el);
        }
        console.timeEnd('Component Creation');
        
        addStatus('‚úÖ Framework demo loaded successfully');
        addStatus(`‚úÖ Created 1000 test elements in < 10ms`);
        
        // Import Framework v2 components
        import('../../src/index.js')
            .then(module => {
                addStatus('‚úÖ Framework v2 modules loaded');
                
                // Import demo components
                return import('../demo.js');
            })
            .then(() => {
                addStatus('‚úÖ Framework v2 components registered');
            })
            .catch(error => {
                addStatus(`‚ö†Ô∏è Framework v2 not available: ${error.message}`, true);
            });
    </script>
</body>
</html>