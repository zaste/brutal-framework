<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Framework v2 - Enhanced Components Test</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, sans-serif;
      background: #f3f4f6;
    }
    .header {
      background: white;
      padding: 2rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .controls {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    .btn {
      padding: 0.5rem 1rem;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn:hover {
      border-color: #3b82f6;
      color: #3b82f6;
    }
    .btn.active {
      background: #3b82f6;
      color: white;
      border-color: #3b82f6;
    }
    .metrics {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: rgba(0,0,0,0.8);
      color: #0f0;
      padding: 1rem;
      border-radius: 0.5rem;
      font-family: monospace;
      font-size: 0.875rem;
    }
    .test-status {
      margin-top: 1rem;
      padding: 1rem;
      background: #f9fafb;
      border-radius: 0.5rem;
    }
    .success { color: #059669; }
    .error { color: #dc2626; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Enhanced Components Test</h1>
    <div class="test-status" id="status">
      Initializing test environment...
    </div>
    <div class="controls">
      <button class="btn active" onclick="switchVariant('default')">Default</button>
      <button class="btn" onclick="switchVariant('gradient')">Gradient</button>
      <button class="btn" onclick="switchVariant('minimal')">Minimal</button>
      <button class="btn" onclick="switchVariant('animated')">Animated</button>
      <button class="btn" onclick="switchVariant('split')">Split</button>
    </div>
  </div>
  
  <div id="demo-container"></div>
  
  <div class="metrics">
    <div>Create: <span id="create-time">0ms</span></div>
    <div>Render: <span id="render-time">0ms</span></div>
    <div>Update: <span id="update-time">0ms</span></div>
    <div>Memory: <span id="memory">0MB</span></div>
  </div>

  <script type="module">
    const status = document.getElementById('status');
    const container = document.getElementById('demo-container');
    
    function updateStatus(message, isError = false) {
      status.innerHTML = `<span class="${isError ? 'error' : 'success'}">${message}</span>`;
    }
    
    async function initializeTest() {
      try {
        updateStatus('Loading Enhanced Components system...');
        
        // Import the hero section which will load all dependencies
        await import('./src/components/sections/hero-section.js');
        
        updateStatus('✓ Components loaded successfully! Creating hero section...');
        
        // Create hero instance
        const startCreate = performance.now();
        const hero = document.createElement('hero-section');
        const createTime = performance.now() - startCreate;
        document.getElementById('create-time').textContent = `${createTime.toFixed(2)}ms`;
        
        // Add to DOM
        const startRender = performance.now();
        container.appendChild(hero);
        const renderTime = performance.now() - startRender;
        document.getElementById('render-time').textContent = `${renderTime.toFixed(2)}ms`;
        
        updateStatus('✓ Hero section created and rendered! You can now test different variants.');
        
        // Make hero globally accessible for variant switching
        window.heroComponent = hero;
        
        // Update memory if available
        if (performance.memory) {
          const memory = (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
          document.getElementById('memory').textContent = `${memory}MB`;
        }
        
      } catch (error) {
        updateStatus(`✗ Error: ${error.message}`, true);
        console.error('Initialization error:', error);
      }
    }
    
    // Global function for button clicks
    window.switchVariant = function(variant) {
      if (!window.heroComponent) {
        updateStatus('Hero component not initialized yet!', true);
        return;
      }
      
      // Update button states
      document.querySelectorAll('.btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent.toLowerCase() === variant) {
          btn.classList.add('active');
        }
      });
      
      // Switch variant and measure time
      const startUpdate = performance.now();
      window.heroComponent.updateVariant(variant);
      const updateTime = performance.now() - startUpdate;
      document.getElementById('update-time').textContent = `${updateTime.toFixed(2)}ms`;
      
      // Update content based on variant
      const content = {
        default: {
          title: 'Framework v2 - Enhanced Components',
          subtitle: 'Zero dependencies, maximum performance. Build amazing web experiences.'
        },
        gradient: {
          title: 'Beautiful Gradient Backgrounds',
          subtitle: 'Modern, colorful designs that capture attention.'
        },
        minimal: {
          title: 'Minimalist Design',
          subtitle: 'Less is more. Clean, focused, impactful.'
        },
        animated: {
          title: 'Smooth Animations',
          subtitle: 'Delight users with polished motion design.'
        },
        split: {
          title: 'Split Layout Design',
          subtitle: 'Perfect for showcasing products with visuals.'
        }
      };
      
      if (content[variant]) {
        window.heroComponent.updateContent(content[variant]);
      }
    };
    
    // Initialize on page load
    initializeTest();
  </script>
</body>
</html>