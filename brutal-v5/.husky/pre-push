#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# 1. Full architecture alignment check
echo "ğŸ›ï¸ Checking architecture alignment..."
npm run check:architecture || {
  echo "âŒ Architecture alignment check failed!"
  echo "Fix violations before pushing"
  exit 1
}

# 2. Build all packages
echo "ğŸ”¨ Building all packages..."
npm run build || {
  echo "âŒ Build failed!"
  exit 1
}

# 3. Size check
echo "ğŸ“ Checking bundle sizes..."
npm run size:check || {
  echo "âŒ Bundle size limits exceeded!"
  exit 1
}

# 4. Full test suite
echo "ğŸ§ª Running full test suite..."
npm run test:all || {
  echo "âŒ Tests failed!"
  exit 1
}

echo "âœ… All pre-push checks passed!"